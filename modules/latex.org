#+TITLE: Latex module

* Latex
** Packages

   Add Latex mode packages.

   #+begin_src emacs-lisp
     (add-to-list 'elpa-packages 'auctex)
     (add-to-list 'elpa-packages 'cdlatex)
     (add-to-list 'el-get-packages 'ebib)
   #+end_src

** RefTeX

   Enable RefTeX support

   #+begin_src emacs-lisp
     (do-after-init 'auctex
       (lambda ()
         (add-hook 'LaTeX-mode-hook 'turn-on-reftex)   ; with AUCTeX LaTeX mode
         (autoload 'reftex-mode     "reftex" "RefTeX Minor Mode" t)
         (autoload 'turn-on-reftex  "reftex" "RefTeX Minor Mode" nil)
         (autoload 'reftex-citation "reftex-cite" "Make citation" nil)
         (autoload 'reftex-index-phrase-mode "reftex-index" "Phrase mode" t)
         (add-hook 'LaTeX-mode-hook 'turn-on-reftex)   ; with AUCTeX LaTeX mode
         (add-hook 'latex-mode-hook 'turn-on-reftex)   ; with Emacs latex mode

         ;; Make RefTeX faster
         (setq reftex-enable-partial-scans t)
         (setq reftex-save-parse-info t)
         (setq reftex-use-multiple-selection-buffers t)
         (setq reftex-plug-into-AUCTeX t)

         ;; Make RefTeX work with Org-Mode
         ;; use 'C-c (' instead of 'C-c [' because the latter is already
         ;; defined in orgmode to the add-to-agenda command.
         (defun org-mode-reftex-setup ()
           (load-library "reftex") 
           (and (buffer-file-name)
           (file-exists-p (buffer-file-name))
           (reftex-parse-all))
           (define-key org-mode-map (kbd "C-c (") 'reftex-citation))

         (add-hook 'org-mode-hook 'org-mode-reftex-setup)

         ;; RefTeX formats for biblatex (not natbib)
         (setq reftex-cite-format
               '(
                 (?\C-m . "\\cite[]{%l}")
                 (?t . "\\textcite{%l}")
                 (?a . "\\autocite[]{%l}")
                 (?p . "\\parencite{%l}")
                 (?f . "\\footcite[][]{%l}")
                 (?F . "\\fullcite[]{%l}")
                 (?x . "[]{%l}")
                 (?X . "{%l}")
                 ))

         (setq font-latex-match-reference-keywords
               '(("cite" "[{")
                 ("cites" "[{}]")
                 ("footcite" "[{")
                 ("footcites" "[{")
                 ("parencite" "[{")
                 ("textcite" "[{")
                 ("fullcite" "[{") 
                 ("citetitle" "[{") 
                 ("citetitles" "[{") 
                 ("headlessfullcite" "[{")))

         (setq reftex-cite-prompt-optional-args nil)
         (setq reftex-cite-cleanup-optional-args t)))
   #+end_src
